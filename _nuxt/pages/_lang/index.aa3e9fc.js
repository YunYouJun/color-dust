(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{337:function(t,e,r){"use strict";r.d(e,"d",(function(){return o})),r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return l})),r.d(e,"b",(function(){return c}));r(14),r(15),r(4);function o(t,g,b){t/=255,g/=255,b/=255;var e,s,r=Math.max(t,g,b),o=Math.min(t,g,b),n=(r+o)/2;if(r===o)e=s=0;else{var l=r-o;switch(s=n>.5?l/(2-r-o):l/(r+o),r){case t:e=(g-b)/l+(g<b?6:0);break;case g:e=(b-t)/l+2;break;case b:e=(t-g)/l+4}e*=60}return[e,100*s,100*n]}function n(t,s,e){var r,g,b;if(t/=360,e/=100,0===(s/=100))r=g=b=e;else{var o=function(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+(q-p)*(2/3-t)*6:p},q=e<.5?e*(1+s):e+s-e*s,p=2*e-q;r=o(p,q,t+1/3),g=o(p,q,t),b=o(p,q,t-1/3)}return[Math.round(255*r),Math.round(255*g),Math.round(255*b)]}function l(t){if(t){var e="#",r=[];if(Array.isArray(t)&&3===t.length)r=t.slice();else{if(!("r"in t&&"g"in t&&"b"in t))return"";r=[t.r,t.g,t.b]}for(var i=0;i<r.length;i++){var o=r[i].toString(16);e+=o.length<2?"0"+o:o}return e}}function c(t){var e;return.299*(t=(e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null).r+.578*t.g+.114*t.b<=192}},342:function(t,e,r){"use strict";r.d(e,"a",(function(){return h}));r(71);var o=r(25),n=(r(4),r(26)),l=r(40),c=r(337),h=function(){function t(canvas,e){Object(n.a)(this,t),this.canvas=canvas,this.ctx=this.canvas.getContext("2d"),this.pixelRatio=window.devicePixelRatio||1,this.canvas.width=this.pixelRatio*parseInt(getComputedStyle(this.canvas).width),this.canvas.height=this.pixelRatio*parseInt(getComputedStyle(this.canvas).height),this.oriWidth=this.canvas.width,this.oriHeight=this.canvas.height,this.colorsInfo=[],this.processInfo={colors:0,censusTime:0,kmeansIteration:0,kmeansTime:0,top5Count:0},this.mainColor=[],this.averageColor=[],this.clusterRes={},this.score="",this.K=e||6}return Object(l.a)(t,[{key:"readFile",value:function(t){var e=this;if(t instanceof File){var r=new FileReader;return r.readAsDataURL(t),new Promise((function(t){r.onload=function(){var r=Object(o.a)(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.drawToCanvas(o.target.result);case 2:e.censusImage(),t();case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}))}var n=new XMLHttpRequest;return new Promise((function(r){n.onload=function(){var n=Object(o.a)(regeneratorRuntime.mark((function o(n){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=URL.createObjectURL(n.target.response),o.next=3,e.drawToCanvas(t);case 3:e.censusImage(),r();case 5:case"end":return o.stop()}}),o)})));return function(t){return n.apply(this,arguments)}}(),n.open("GET",t,!0),n.responseType="blob",n.send()}))}},{key:"drawToCanvas",value:function(t){var e=this,r=this.pixelRatio,canvas=this.canvas,o=this.ctx,img=new Image;return img.src=t,img.crossOrigin="anonymous",new Promise((function(t){img.onload=function(){o.clearRect(0,0,canvas.width,canvas.height);var n=0,l=0;img.width<img.height?(n=100*r,e.isHorizontal=!1):(l=100*r,e.isHorizontal=!0);var c=img.width>(canvas.width-n)/r?(canvas.width-n)/r:img.width,h=img.height>(canvas.height-l)/r?(canvas.height-l)/r:img.height,d=c/img.width<h/img.height?c/img.width:h/img.height;c=img.width*d,h=img.height*d,canvas.style.width=c+n/r+"px",canvas.style.height=h+l/r+"px",canvas.width=c*r+n,canvas.height=h*r+l,o.drawImage(img,0,0,img.width,img.height,0,0,c*r,h*r),t()}}))}},{key:"censusImage",value:function(){var canvas=this.canvas,t=this.ctx,e=this.pixelRatio,r=(new Date).getTime(),o=null;if(!(o=this.isHorizontal?t.getImageData(0,0,canvas.width,canvas.height-100*e):t.getImageData(0,0,canvas.width-100*e,canvas.height)))return"Can not read image data, maybe because of cross-domain limitation.";var n,g,b,l=[],h=0,d=o.height*o.width<36e4?1:2,f=Math.round(.1066*this.K*this.K-2.7463*this.K+17.2795);f=f<4?4:f;var v={colors:0,censusTime:0,kmeansIteration:0,kmeansTime:0,top5Count:0};v.colorStep=f;for(var m,w,x=[],C=1;C<o.height-1;){for(var col=1;col<o.width-1;)if(n=o.data[C*o.width*4+4*col],g=o.data[C*o.width*4+4*col+1],b=o.data[C*o.width*4+4*col+2],(m=Object(c.d)(n,g,b))[2]>97||m[2]>95&&m[1]<30)col+=d;else if(m[2]<3||m[2]<5&&m[1]<30)col+=d;else{h++,w=1e4*Math.floor(m[0]/10)+100*Math.floor(m[1]/5)+Math.floor(m[2]/5);var y=l.indexOf(w);y<0?(l.push(w),x.push({key:w,count:1,r:n,g:g,b:b,h:m[0],s:m[1],l:m[2],hex:"0",category:-1})):x[y].count++,col+=d}C+=d}v.pixelCount=h,v.censusTime=(new Date).getTime()-r,v.colors=x.length,r=(new Date).getTime(),x.sort((function(pre,t){return t.count-pre.count}));var k=x.length;x=x.filter((function(t){return!(t.count<5-d&&k>400)})),this.mainColor=[Object(c.c)(x[0]),Object(c.c)(x[1]),Object(c.c)(x[2])];var M=this.chooseSeedColors(x,this.K);this.clusterRes=this.kMC(x,M,100),this.clusterColors=this.clusterRes.seeds,this.clusterColors=this.clusterColors.map((function(t){return Object(c.c)(Object(c.a)(t.h,t.s,t.l))}));var _=0,$=0,I=0,R=0;for(k=x.length;k--;)_+=x[k].r*x[k].count,$+=x[k].g*x[k].count,I+=x[k].b*x[k].count,R+=x[k].count;this.averageColor=Object(c.c)({r:Math.floor(_/R),g:Math.floor($/R),b:Math.floor(I/R)}),v.kmeansTime=+new Date-r,v.kmeansIteration=this.clusterRes.iteration,this.info=this.countColor(x),v.top5Count=100*this.info.top5Count,this.colorsInfo=x,this.processInfo=v}},{key:"chooseSeedColors",value:function(t,e){for(var r=[],o=t.length,i=0;i<o;i++){var n=r.length,l=t[i];if(i){for(var c=0;c<n;c++){if(Math.abs(r[c].h-l.h)+Math.abs(r[c].s-l.s)+Math.abs(r[c].l-l.l)<45)break}if(c===n&&(l.category=r.length,r.push({h:l.h,s:l.s,l:l.l,category:l.category,count:l.count})),r.length>=e)break}else l.category=0,r.push({h:l.h,s:l.s,l:l.l,category:l.category,count:l.count})}return r}},{key:"kMC",value:function(t,e,r){for(var o=0;o++<r;){e=e.filter((function(t){return t}));for(var n=t.length,l=n/8^0,h=n%8;h--;)this.classifyColor(t[h],e);for(;l--;)this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e),this.classifyColor(t[--n],e);n=t.length;for(var d=[],f=void 0;n--;)d[f=t[n].category]?d[f].count+=t[n].count:(d[f]={},d[f].h=0,d[f].s=0,d[f].l=0,d[f].count=t[n].count);for(n=t.length;n--;)d[f=t[n].category].h+=t[n].h*t[n].count/d[f].count,d[f].s+=t[n].s*t[n].count/d[f].count,d[f].l+=t[n].l*t[n].count/d[f].count;var v=d.every((function(t,r){return Math.abs(t.h-e[r].h)<.5&&Math.abs(t.s-e[r].s)<.5&&Math.abs(t.l-e[r].l)<.5}));if(e=d.map((function(t,e){return{h:t.h,s:t.s,l:t.l,category:e,count:t.count}})),v)break}return e.sort((function(pre,t){var e=Object(c.a)(pre.h,pre.s,pre.l);e=e[0]+e[1]+e[2];var r=Object(c.a)(t.h,t.s,t.l);return(r=r[0]+r[1]+r[2])-e})),{seeds:e,iteration:o}}},{key:"classifyColor",value:function(t,e){for(var r,o=e.length,n=1e4;o--;){var l=Math.abs(e[o].h-t.h)+Math.abs(e[o].s-t.s)+Math.abs(e[o].l-t.l);l<n&&(n=l,r=o)}t.category=r}},{key:"countColor",value:function(t){for(var e,r={top50Count:0,top20Count:0,top10Count:0,top5Count:0},o=0,n=0,l=0,c=0,h=0,d=t.length;d--;)o+=(e=t[d]).count,d<50&&(n+=e.count,d<20&&(l+=e.count,d<10&&(c+=e.count,d<5&&(h+=e.count))));return d=t.length,r.top50Count=n/o,r.top20Count=l/o,r.top10Count=c/o,r.top5Count=h/o,r}},{key:"drawPalette",value:function(){var t=this.pixelRatio,canvas=this.canvas,e=this.ctx,r=this.isHorizontal?canvas.width:canvas.height,o=r*(this.K<10?.02:.01),p=(r-(this.K-1)*o)/this.K,n=this.clusterColors;if(0!==n.length){this.isHorizontal?e.clearRect(0,canvas.height-90*t,canvas.width,90*t):e.clearRect(canvas.width-90*t,0,90*t,canvas.height);for(var i=0;i<this.K;i++)e.fillStyle=n[i],this.isHorizontal?e.fillRect((p+o)*i,canvas.height-90*t,p,90*t):e.fillRect(canvas.width-90*t,(p+o)*i,90*t,p)}}},{key:"clearCanvas",value:function(){this.canvas.width=this.oriWidth,this.canvas.height=this.oriHeight}}]),t}()},361:function(t,e,r){var content=r(411);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("4386b32c",content,!0,{sourceMap:!1})},362:function(t,e,r){var content=r(415);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("3fd18d6a",content,!0,{sourceMap:!1})},363:function(t,e,r){var content=r(419);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("1320127e",content,!0,{sourceMap:!1})},364:function(t,e,r){var content=r(421);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("4e8bc161",content,!0,{sourceMap:!1})},365:function(t,e,r){var content=r(425);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(12).default)("069a4f1e",content,!0,{sourceMap:!1})},410:function(t,e,r){"use strict";var o=r(361);r.n(o).a},411:function(t,e,r){(e=r(11)(!1)).push([t.i,'.showcase{width:100%;max-width:1024px;height:460px;background-color:transparent}.showcase-wrap{position:relative;overflow:hidden;z-index:0;text-align:center;line-height:0}.showcase-wrap.censused{z-index:0}.showcase-wrap.censused:after{display:none;-webkit-animation:none;animation:none}.showcase-wrap:after{position:absolute;top:-100%;right:-100%;bottom:-100%;left:-100%;background:-webkit-linear-gradient(45deg,#fcc,#cfc,#ccf);background-position:0 0;background-size:100% 100%;content:"";transform:translate(30%,30%);-webkit-animation:bg 8s linear infinite alternate;animation:bg 8s linear infinite alternate;will-change:transform;z-index:-1}@-webkit-keyframes bg{33%{transform:translate(-30%,30%)}66%{transform:translate(-30%,-30%)}to{transform:translate(30%,-30%)}}@keyframes bg{33%{transform:translate(-30%,30%)}66%{transform:translate(-30%,-30%)}to{transform:translate(30%,-30%)}}',""]),t.exports=e},414:function(t,e,r){"use strict";var o=r(362);r.n(o).a},415:function(t,e,r){(e=r(11)(!1)).push([t.i,".color-box{display:inline-block;width:1rem;height:1rem;border-radius:2px;box-shadow:1px 1px 2px rgba(0,0,0,.3);margin-left:5px;margin-right:2px}.color-bar .color-wrap .color{height:80px;box-shadow:0 0 20px rgba(0,0,0,.4)}",""]),t.exports=e},418:function(t,e,r){"use strict";var o=r(363);r.n(o).a},419:function(t,e,r){(e=r(11)(!1)).push([t.i,".color-card{min-height:100px}.color-text{position:absolute;bottom:0;background-color:hsla(0,0%,100%,.9);width:100%;color:#000}",""]),t.exports=e},420:function(t,e,r){"use strict";var o=r(364);r.n(o).a},421:function(t,e,r){(e=r(11)(!1)).push([t.i,".tick{text-transform:uppercase}",""]),t.exports=e},424:function(t,e,r){"use strict";var o=r(365);r.n(o).a},425:function(t,e,r){(e=r(11)(!1)).push([t.i,"#bubble-chart[data-v-33974bf8]{width:100%;max-width:600px;height:400px}",""]),t.exports=e},426:function(t,e,r){"use strict";r.r(e);r(71);var o=r(25),n=r(342),l=r(337),c={data:function(){return{palette:!0,colorDust:{},file:null,K:6,message:"",blur:0}},computed:{bgColor:function(){return this.$store.state.theme.primaryColor}},mounted:function(){var canvas=this.$refs.canvasShowcase;this.colorDust=new n.a(canvas),this.colorDust.K=this.K},methods:{censusImage:function(){this.file&&(this.colorDust.K=this.K,this.colorDust.censusImage(),this.colorDust.drawPalette())},handleClearClick:function(){this.colorDust.clearCanvas(),this.$store.dispatch("resetApp")},startProcess:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,o,n,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.file){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.colorDust.readFile(t.file);case 4:t.message=e.sent,t.message&&t.$toast.info(t.message),r=t.colorDust.colorsInfo,o=t.colorDust.mainColor,n=t.colorDust.averageColor,c=o[0],t.$vuetify.theme.dark=Object(l.b)(c),t.$store.commit("setColorsInfo",r),t.$store.commit("setClusterColors",t.colorDust.clusterColors),t.$store.commit("setMainColor",o),t.$store.commit("setAverageColor",t.colorDust.averageColor),t.$store.commit("setProcessInfo",t.colorDust.processInfo),t.$store.commit("theme/setPrimaryColor",n),t.$store.commit("theme/setAccentColor",c),t.K&&t.colorDust.drawPalette();case 19:case"end":return e.stop()}}),e)})))()}}},h=(r(410),r(43)),d=r(53),f=r.n(d),v=r(427),m=r(137),w=r(393),x=r(429),C=r(394),y=r(431),k=r(377),component=Object(h.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card",{staticClass:"showcase-wrap",class:{censused:t.bgColor},style:{backgroundColor:t.bgColor}},[r("canvas",{ref:"canvasShowcase",staticClass:"showcase"})]),t._v(" "),r("v-alert",{staticClass:"mt-4",attrs:{color:"primary","colored-border":"",border:"left",elevation:"2"}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"6"}},[r("v-file-input",{attrs:{accept:"image/*",placeholder:t.$t("home.upload.placeholder"),"prepend-icon":"$vuetify.icons.mdiImage","small-chips":"","show-size":"",outlined:"",dense:"","hide-details":""},on:{change:t.startProcess,"click:clear":t.handleClearClick},model:{value:t.file,callback:function(e){t.file=e},expression:"file"}})],1),t._v(" "),r("v-col",{attrs:{cols:"6",md:"6"}},[r("v-text-field",{attrs:{label:t.$t("home.blur.label"),type:"number",outlined:"",dense:"",min:"0"},model:{value:t.blur,callback:function(e){t.blur=e},expression:"blur"}})],1)],1),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",md:"12"}},[r("v-slider",{staticClass:"mt-5",attrs:{min:"0",max:"20","thumb-label":"always","prepend-icon":"$vuetify.icons.mdiPalette",dense:"",hint:t.$t("home.palette.hint"),"persistent-hint":""},on:{end:t.censusImage},model:{value:t.K,callback:function(e){t.K=e},expression:"K"}})],1)],1)],1)],1)}),[],!1,null,null,null),M=component.exports;f()(component,{VAlert:v.a,VCard:m.a,VCol:w.a,VFileInput:x.a,VRow:C.a,VSlider:y.a,VTextField:k.a});var _={props:{label:{type:String,default:"Color"},colors:{type:Array,default:function(){return[]}}},computed:{background:function(){if(this.colors.length>1){var t="linear-gradient(to right";return this.colors.forEach((function(e){t+=","+e})),{background:t+=")"}}return{background:this.colors[0]}}},methods:{rgbToHex:l.c}},$=(r(414),r(432)),I=Object(h.a)(_,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"color-bar"},[r("v-alert",{attrs:{border:"left",color:t.colors[0],"colored-border":"",elevation:"2"}},[r("h3",{staticClass:"title"},[r("span",{staticClass:"label text-capitalize"},[t._v(t._s(t.label))]),t._v(" "),r("span",{staticClass:"value font-weight-light text-uppercase ml-2"},t._l(t.colors,(function(e,i){return r("span",{key:i,style:{color:e}},[r("i",{staticClass:"color-box",style:{backgroundColor:e}}),t._v(" "),r("span",[t._v(t._s(e))])])})),0),t._v(" "),r("v-divider",{staticClass:"mb-2"})],1),t._v(" "),r("div",{staticClass:"color-wrap"},[r("v-card",{style:t.background,attrs:{height:"80",ripple:""}})],1)])],1)}),[],!1,null,null,null),R=I.exports;f()(I,{VAlert:v.a,VCard:m.a,VDivider:$.a});var B=Object(h.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-wrap"},[r("v-alert",{attrs:{border:"left","colored-border":"",color:"success"}},[t._v("\n    "+t._s(t.$t("color.info.amount",{amount:t.$store.state.processInfo.colors}))+"\n  ")]),t._v(" "),r("v-alert",{attrs:{border:"left","colored-border":"",color:"info"}},[t._v("\n    "+t._s(t.$t("color.info.time",{time:t.$store.state.processInfo.censusTime}))+"\n  ")]),t._v(" "),r("v-alert",{attrs:{border:"left","colored-border":"",color:"warning"}},[t._v("\n    "+t._s(t.$t("color.info.kmeans",{iteration:t.$store.state.processInfo.kmeansIteration,time:t.$store.state.processInfo.kmeansTime}))+"\n  ")]),t._v(" "),r("v-alert",{attrs:{border:"left","colored-border":"",color:"error"}},[t._v("\n    "+t._s(t.$t("color.info.top5",{percent:t.$store.state.processInfo.top5Count.toFixed(2)}))+"\n  ")])],1)}),[],!1,null,null,null),D=B.exports;f()(B,{VAlert:v.a});var j={props:{color:{type:String,default:""}},methods:{copyColorHex:function(){var t=this.color.toUpperCase();navigator.clipboard.writeText(t),this.$toast.success('Copy &nbsp;<strong style="color:'.concat(t,'">').concat(t,"</strong>&nbsp; successfully!"))}}},z=(r(418),Object(h.a)(j,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-card",{staticClass:"color-card",attrs:{ripple:"",hover:"",color:this.color},on:{click:this.copyColorHex}},[e("h4",{staticClass:"pa-0 color-text text-uppercase subtitle-2",staticStyle:{"font-family":"Source Code Pro !important"}},[this._v("\n    "+this._s(this.color)+"\n  ")])])}),[],!1,null,null,null)),O=z.exports;f()(z,{VCard:m.a});var A={components:{ColorCard:O},props:{colors:{type:Array,default:function(){return[]}}}},T=Object(h.a)(A,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-alert",{attrs:{border:"left",color:"indigo","colored-border":"",elevation:"2"}},[e("h3",{staticClass:"title"},[this._v(this._s(this.$t("color.clustered")))]),this._v(" "),e("v-divider",{staticClass:"mb-2"}),this._v(" "),e("v-row",{staticClass:"text-center justify-center",attrs:{dense:""}},this._l(this.colors,(function(t,i){return e("v-col",{key:i,attrs:{cols:"3",md:"1"}},[e("color-card",{attrs:{color:t}})],1)})),1)],1)}),[],!1,null,null,null),V=T.exports;f()(T,{VAlert:v.a,VCol:w.a,VDivider:$.a,VRow:C.a});r(44),r(46);var S=r(373),P={props:{colors:{type:Array,default:function(){return[]}}},watch:{colors:function(t,e){if(0!==t.length||0!==e.length){var data=Array.from(e.slice(0,19));0!==e.length&&this.barChart.update(data)}}},mounted:function(){this.barChart=this.drawBarChart(this.colors)},methods:{drawBarChart:function(t){var e=0,r=70,o=0,n=document.getElementById("bar-chart-container").clientWidth,l=e+30*t.length,svg=S.e("#bar-chart-container").append("svg").attr("id","bar-chart").attr("viewBox","0 0 ".concat(n," ").concat(l)).attr("height",l).append("g"),c=S.b(t,(function(t){return t.count})),h=S.d().domain([0,c]).rangeRound([r,n-o]),d=S.c().domain(t.map((function(t){return t.hex}))).rangeRound([e,l]).paddingInner(.2),f=svg.append("g").style("fill","dodgerblue").join("g").selectAll("rect").data(t).join("rect").style("mix-blend-mode","multiply").attr("fill",(function(t){return t.hex})).attr("x",h(0)).attr("y",(function(t){return d(t.hex)})).attr("width",(function(t){return h(t.count)})).attr("height",d.bandwidth()-1),v=function(g,t){return g.attr("transform","translate(".concat(r,",0)")).call(S.a(t).tickSizeOuter(0))},m=svg.append("g").call(v,d);return m.selectAll("text").attr("font-size","0.9rem").attr("font-family","Source Code Pro"),Object.assign(svg.node(),{update:function(data){var t=svg.transition().duration(750);m.transition(t).call(v,d.domain(data.map((function(t){return t.hex})))),f=f.data(data,(function(t){return t.hex})).join((function(t){return t.append("rect").style("mix-blend-mode","multiply").attr("class","bar").attr("fill",(function(t){return t.hex})).attr("x",h(0)).attr("y",(function(t){return d(t.hex)})).attr("width",(function(t){return h(t.count)})).attr("height",d.bandwidth()-1)}),(function(t){return t.attr("height",d.bandwidth()-1).attr("fill",(function(t){return t.hex}))}),(function(t){return t.call((function(t){return t.transition().duration(600).remove().attr("x",(function(t){return-h(t.count)})).style("opacity",0)}))})).call((function(e){return e.transition(t).attr("width",(function(t){return h(t.count)})).attr("y",(function(t){return d(t.hex)}))}))}})}}},K=(r(420),Object(h.a)(P,(function(){var t=this.$createElement,e=this._self._c||t;return e("v-alert",{attrs:{"colored-border":"",border:"left",elevation:2}},[e("div",{attrs:{id:"bar-chart-container"}})])}),[],!1,null,null,null)),E=K.exports;f()(K,{VAlert:v.a});r(13);var H=r(422),F=r.n(H),W={props:{colors:{type:Array,default:function(){return[]}},height:{type:Number,default:150},callback:{type:Function,default:function(t){navigator.clipboard.writeText(t),this.$toast.success('Copy &nbsp;<strong style="color:'.concat(t,';">').concat(t,"</strong>&nbsp; successfully!"))}}},data:function(){return{words:[]}},watch:{colors:function(){this.colors.length>0&&(this.words=this.processColors(this.colors),this.reDraw())}},mounted:function(){var t=this;this.colors.length>0?(this.words=this.processColors(this.colors),this.reDraw()):this.reDraw(),window.onresize=function(){t.reDraw()}},methods:{processColors:function(t){for(var e,r=[],o=t.length,n=o<360?1:Math.ceil(o/360),i=0;i<o;)e=t[i],r.push({size:e.count,text:e.hex}),i+=n;return r},reDraw:function(){S.e("#wordcloud-container").selectAll("svg").remove(),this.initWordCloud()},initWordCloud:function(){this.drawWordCloud(),this.$nextTick((function(){var t=this;document.querySelectorAll(".cloud-word").forEach((function(e){e.addEventListener("click",(function(){t.callback(e.dataset.text)}))}))}))},minMax:function(t){return t.reduce((function(t,e){return t[0]=void 0===t[0]||e.size<t[0]?e.size:t[0],t[1]=void 0===t[1]||e.size>t[1]?e.size:t[1],t}),[])},drawWordCloud:function(){var t=document.getElementById("wordcloud-container").clientWidth,e=this.height,svg=S.e("#wordcloud-container").append("svg").attr("width",t).attr("height",e),r=this.minMax(this.words),o=F()().size([t,e]).words(this.words.map((function(t){return{id:t.id,text:t.text,size:10+50*(t.size-r[0])/(r[1]-r[0])}}))).padding(10).rotate((function(){return 0})).fontSize((function(t){return t.size})).on("end",(function(t){svg.append("g").attr("transform","translate(".concat(o.size()[0]/2,",").concat(o.size()[1]/2,")")).selectAll("text").data(t).enter().append("a").attr("class","cloud-word").attr("data-text",(function(t){return t.text.toUpperCase()})).append("text").attr("fill",(function(t){return t.text})).attr("font-family","Source Code Pro").attr("font-size",(function(t){return"".concat(t.size,"px")})).attr("text-anchor","middle").attr("transform",(function(t){return"translate(".concat([t.x,t.y],")rotate(").concat(t.rotate,")")})).text((function(t){return t.text.toUpperCase()}))}));o.start()}}},U=Object(h.a)(W,(function(){var t=this.$createElement;return(this._self._c||t)("v-alert",{staticStyle:{"font-weight":"bold"},attrs:{id:"wordcloud-container",border:"left","colored-border":"",color:"brown",elevation:"2"}})}),[],!1,null,null,null),L=U.exports;f()(U,{VAlert:v.a});r(206),r(423);var J={props:{colors:{type:Array,default:function(){return[]}}},data:function(){return{selectColor:"#",bubbles:[]}},watch:{colors:function(){if(this.colors.length>0){var t=this.processColors(this.colors);this.renderBubble(t)}else{var canvas=this.$refs.bubbleChart;this.ctx.clearRect(0,0,canvas.width,canvas.height)}}},mounted:function(){var canvas=this.$refs.bubbleChart,t=window.devicePixelRatio||1;this.pixelRatio=t,canvas.width=t*parseInt(getComputedStyle(canvas).width),canvas.height=t*parseInt(getComputedStyle(canvas).height),this.oriWidth=canvas.width,this.oriHeight=canvas.height,this.ctx=canvas.getContext("2d"),this.circleR=Math.min(canvas.width/2-15*t,canvas.height/2-15*t),this.iterations=2,this.time=400,this.density=.1,this.initBubbles(this.createDataset()),this.renderBubble(this.bubbles)},methods:{copyColorHex:function(){if(this.$refs.selectColor){var t=this.$refs.selectColor.textContent;navigator.clipboard.writeText(t.toUpperCase()),this.$toast.success('Copy &nbsp;<strong style="color:'.concat(this.selectColor,';">').concat(this.selectColor,"</strong>&nbsp; successfully!"))}},initBubbles:function(t){var e=this.pixelRatio,canvas=this.$refs.bubbleChart,r=canvas.width,o=canvas.height,n=this.circleR,l=Math.log2(t[0].weight),c=n*this.density;this.K=c,this.bubbles=t.map((function(t){var h=r/2-n+2*Math.random()*n,d=o/2-n+2*Math.random()*n,f=Math.sqrt(Math.pow(r/2-h,2)+Math.pow(o/2-d,2)),v=c*(Math.log(t.weight)/l);return f>n-(v=(v=v<1.5*e?1.5*e:v)>c?c:v)&&(h+=(r/2-h)*(f-n+v)/f,d+=(o/2-d)*(f-n+v)/f),{weight:t.weight,color:t.color,radius:v,x:h,y:d}})),this.maxRadius=n*this.density,this.computePosition()},handleCanvasClick:function(t){for(var canvas=this.$refs.bubbleChart,e=this.windowTocanvas(canvas,t.clientX,t.clientY),r=canvas.width/2,o=canvas.height/2,n=e.x*this.pixelRatio,l=e.y*this.pixelRatio,c="",h=Math.sqrt((n-r)*(n-r)+(l-o)*(l-o))<this.circleR,d=this.bubbles,f=d.length;f--;){var v=d[f];if(Math.sqrt((n-v.x)*(n-v.x)+(l-v.y)*(l-v.y))<v.radius){c=v.color;break}}if(h)this.selectColor=c?c.toUpperCase():"#";else if(this.colors.length){var m=this.processColors(this.colors);this.renderBubble(m)}else this.initBubbles(this.createDataset()),this.renderBubble(this.bubbles)},processColors:function(t){for(var e,r=[],o=t.length,n=o<360?1:Math.ceil(o/360),i=0;i<o;)e=t[i],r.push({weight:e.count,color:e.hex}),i+=n;return r},renderBubble:function(t){t&&t.length>0&&this.initBubbles(t),this.beginTime=+new Date,this.speed=this.maxRadius/this.time,this.drawBubbles()},computePosition:function(){for(var t=this.iterations,e=0,r=this.bubbles,o=r.length;e<t;){e++;for(var n=o;n--;)this.traverseBubbles(r[n])}},traverseBubbles:function(t){for(var e=this.bubbles,r=e.length,o=r/8^0,n=r%8;n--;)this.divideBubbles(t,e[n]);for(;o--;)this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r]),this.divideBubbles(t,e[--r])},divideBubbles:function(t,e){if(!(t.color===e.color&&t.radius===e.radius&&Math.abs(t.x-e.x)<.001)){var r=this.collisionCheck(t,e);if(!(r>0)){r=Math.abs(r);var o=Math.atan(Math.abs(t.y-e.y)/Math.abs(t.x-e.x)),n=r*Math.cos(o)+.2,l=r*Math.sin(o)+.2;e.x>=t.x&&e.y>=t.y?(e.x+=n,e.y+=l):e.x<=t.x&&e.y>=t.y?(e.x-=n,e.y+=l):e.x<=t.x&&e.y<=t.y?(e.x-=n,e.y-=l):e.x>=t.x&&e.y<=t.y&&(e.x+=n,e.y-=l)}}},collisionCheck:function(t,e){var r=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),n=t.radius+e.radius;return Math.sqrt(r*r+o*o)-n},drawBubbles:function(){var t=+new Date,e=(t-this.beginTime)*this.speed,canvas=this.$refs.bubbleChart,r=this.ctx,o=this.bubbles,n=o.length;r.clearRect(0,0,canvas.width,canvas.height);for(var l=n/8^0,c=n%8;c--;)this.drawBubble(o[c],e);for(;l--;)this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e),this.drawBubble(o[--n],e);t<this.beginTime+this.time?window.requestAnimationFrame(this.drawBubbles):0!==this.speed&&(this.speed=0,window.requestAnimationFrame(this.drawBubbles))},drawBubble:function(t,e){var r=this.ctx,o=t.radius;if(r.fillStyle=t.color,r.beginPath(),e<o&&0!==this.speed)r.arc(t.x,t.y,e,0,2*Math.PI);else{var n=0===this.speed?0:(e-o)/this.maxRadius,l=2*Math.exp(-8*n)*Math.sin(4*Math.PI*n);r.arc(t.x,t.y,o+l,0,2*Math.PI)}r.fill()},windowTocanvas:function(canvas,t,e){var r=canvas.getBoundingClientRect();return{x:t-r.left,y:e-r.top}},createDataset:function(){var t=[];t.push({weight:100,color:"#666666"});for(var i=0;i<99;i++)t.push({weight:Math.floor(50*Math.random()),color:"rgb("+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+","+Math.floor(255*Math.random())+")",opacity:Math.random()});return t}}},X=(r(424),r(123)),G=r(430),N=r(133),Y=Object(h.a)(J,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"bubble-chart"},[r("v-alert",{attrs:{color:"blue-grey",border:"left","colored-border":"",elevation:"2"}},[r("h2",{staticClass:"headline ml-2"},[t._v("\n      "+t._s(t.$t("color.bubble-chart"))+"\n    ")]),t._v(" "),r("v-divider",{staticClass:"my-2"}),t._v(" "),r("v-card",{staticClass:"text-center",attrs:{elevation:0}},[r("canvas",{ref:"bubbleChart",attrs:{id:"bubble-chart"},on:{click:t.handleCanvasClick}}),t._v(" "),r("v-card-actions",{staticClass:"justify-center"},[r("v-chip",{staticClass:"text-uppercase",attrs:{color:"success"},on:{click:t.copyColorHex}},[r("v-icon",{attrs:{left:""}},[t._v("$vuetify.icons.mdiEyedropper")]),t._v(" "),r("span",{ref:"selectColor"},[t._v(t._s(t.selectColor))])],1)],1)],1)],1)],1)}),[],!1,null,"33974bf8",null),Q=Y.exports;f()(Y,{VAlert:v.a,VCard:m.a,VCardActions:X.a,VChip:G.a,VDivider:$.a,VIcon:N.a});var Z={components:{ImageShowcase:M,ColorBar:R,ColorList:V,ImageInfo:D,BarChart:E,WordCloud:L,CanvasBubbleChart:Q},head:function(){return{title:this.$t("links.home")}}},tt=Object(h.a)(Z,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-row",{attrs:{"no-gutters":""}},[r("v-col",{attrs:{cols:"12"}},[r("image-showcase")],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("color-list",{attrs:{colors:t.$store.state.clusterColors}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("color-bar",{attrs:{label:t.$t("color.main"),colors:this.$store.state.mainColor}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("color-bar",{attrs:{label:t.$t("color.average"),colors:[this.$store.state.averageColor]}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("image-info")],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("bar-chart",{attrs:{colors:t.$store.state.colorsInfo}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("word-cloud",{attrs:{colors:t.$store.state.colorsInfo}})],1),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("canvas-bubble-chart",{attrs:{colors:t.$store.state.colorsInfo}})],1)],1)}),[],!1,null,null,null);e.default=tt.exports;f()(tt,{VCol:w.a,VRow:C.a})}}]);